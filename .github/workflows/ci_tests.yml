# .github/workflows/ci_tests.yml

name: Ejecutar Pruebas de Infraestructura (CI)

on:
  push:
    branches: [ main ] # Ejecutar cuando se haga push a la rama 'main'

jobs:
  test_infrastructure:
    runs-on: self-hosted 
    
    steps:
    - name: Checkout del Codigo
      uses: actions/checkout@v4 
      
    - name: ðŸš¨ Instalar paquetes esenciales de Python ðŸš¨
      run: |
        # Necesario si pip no viene instalado por defecto con python3
        sudo apt-get update
        sudo apt-get install -y python3-pip python3-venv 
        
    - name: Instalar Dependencias (Usando el Python/Pip del sistema)
      run: |
        # Ahora pip3 existe y puede ser usado
        python3 -m pip install --upgrade pip
        pip3 install -r requirements.txt 

    - name: Ejecutar Pruebas de Infraestructura
      run: pytest -v tests/features